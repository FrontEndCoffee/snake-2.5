/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	const PERSPECTIVE_CONSTANT = 0.875;
	
	const shapes = __webpack_require__(1);
	const Vector = shapes.Vector;
	const Line = shapes.Line;
	const Polygon = shapes.Polygon;
	const Entity = shapes.Entity;
	
	const canvas = document.getElementById('canvas');
	const context = canvas.getContext('2d');
	
	const canvasSize = new Vector(canvas.clientWidth, canvas.clientHeight);
	
	const blockSize = new Vector(150, 200);
	
	const position = new Vector(0, 0);
	const blockShape = new Polygon([new Vector(64, 64), new Vector(64, -64), new Vector(-64, -64), new Vector(-64, 64)]);
	
	const blockEntity = new Entity(blockShape, position);
	blockEntity.position = new Vector(12, 23);
	
	// init
	context.translate(canvasSize.x / 2, canvasSize.y / 2);
	context.fillStyle = "rgba(255,255,255,0.9)";
	window.ctx = context;
	
	window.onmousemove = function (e) {
	
	  const mousePos = new Vector(e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop);
	
	  clearFrame();
	  drawCursor(mousePos);
	
	  blockEntity.position = mousePos;
	
	  // create shadow Entity
	  const line = new Line(blockEntity.position, new Vector(0, 0));
	
	  const blockShadowEntity = new Entity(blockEntity.verticies, blockEntity.position);
	
	  const frontpaneVertecies = blockEntity.getVerticies();
	  const backpaneVertecies = frontpaneVertecies.map(addPerspective);
	
	  // draw backpane dots (#777)
	  context.fillStyle = '#777';
	  backpaneVertecies.forEach(function (vertexVector) {
	    context.fillRect(vertexVector.x - 1, vertexVector.y - 1, 3, 3);
	  });
	
	  // draw backpane lines (#777)
	  context.strokeStyle = '#777';
	  backpaneVertecies.forEach(function (vertexVector, i, vertecies) {
	    const nextVertex = vertecies[(i + 1) % vertecies.length];
	    drawLine(vertexVector, nextVertex);
	  });
	
	  // draw middle lines (#bbb)
	  context.strokeStyle = '#bbb';
	  backpaneVertecies.forEach(function (vertexVector, i) {
	    const frontpaneVertex = frontpaneVertecies[i];
	    drawLine(vertexVector, frontpaneVertex);
	  });
	
	  // draw frontpane lines (#fff)
	  context.strokeStyle = '#fff';
	  frontpaneVertecies.forEach(function (vertexVector, i, vertecies) {
	    const nextVertex = vertecies[(i + 1) % vertecies.length];
	    drawLine(vertexVector, nextVertex);
	  });
	
	  // draw frontpane dots (#fff)
	  context.fillStyle = '#fff';
	  frontpaneVertecies.forEach(function (vertexVector) {
	    context.fillRect(vertexVector.x - 1, vertexVector.y - 1, 3, 3);
	  });
	};
	
	function clearFrame() {
	  context.clearRect(-canvasSize.x / 2, -canvasSize.y / 2, canvasSize.x, canvasSize.y);
	}
	
	function drawLine(vector1, vector2) {
	  context.beginPath();
	  context.moveTo(vector1.x, vector1.y);
	  context.lineTo(vector2.x, vector2.y);
	  context.stroke();
	}
	
	function addPerspective(vertexVector) {
	  return new Vector(vertexVector.x * PERSPECTIVE_CONSTANT, vertexVector.y * PERSPECTIVE_CONSTANT);
	}
	
	function drawCursor(mousePosVec) {
	  const oldStyle = context.fillStyle;
	  context.fillStyle = '#fff';
	  context.fillRect(mousePosVec.x - 5, mousePosVec.y - 1, 10, 2);
	  context.fillRect(mousePosVec.x - 1, mousePosVec.y - 5, 2, 10);
	  context.fillStyle = oldStyle;
	}

/***/ },
/* 1 */
/***/ function(module, exports) {

	'use strict';
	
	function Vector(x, y) {
	  this.x = x;
	  this.y = y;
	}
	Vector.prototype.add = function (vector) {
	  return new Vector(this.x + vector.x, this.y + vector.y);
	};
	
	function Line(v1, v2) {
	  this.v1 = v1;
	  this.v2 = v2;
	}
	Line.prototype.getDeltaX = function () {
	  return this.v2.x - this.v1.x;
	};
	Line.prototype.getDeltaY = function () {
	  return this.v2.y - this.v1.y;
	};
	Line.prototype.getLength = function () {
	  return Math.sqrt(Math.pow(this.getDeltaX(), 2) + Math.pow(this.getDeltaY(), 2));
	};
	
	function Polygon(vectors) {
	  if (vectors.length < 3) throw 'Polygon must have at least 3 verticies';
	  this.verticies = vectors;
	}
	
	function Entity(shape, position) {
	  this.shape = shape;
	  this.position = position;
	}
	Entity.prototype.getVerticies = function () {
	  const position = this.position;
	  return this.shape.verticies.map(function (vertexVector) {
	    return vertexVector.add(position);
	  });
	};
	Entity.prototype.translate = function (vector) {
	  this.position = this.position.add(vector);
	};
	
	module.exports = {
	  Vector: Vector,
	  Line: Line,
	  Polygon: Polygon,
	  Entity: Entity
	};

/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNGVkZTlhYTM4Y2Q1MWI4MDM2ZDEiLCJ3ZWJwYWNrOi8vLy4vYXBwL2pzL3NyYy9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2pzL3NyYy9zaGFwZXMuanMiXSwibmFtZXMiOlsiUEVSU1BFQ1RJVkVfQ09OU1RBTlQiLCJzaGFwZXMiLCJyZXF1aXJlIiwiVmVjdG9yIiwiTGluZSIsIlBvbHlnb24iLCJFbnRpdHkiLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29udGV4dCIsImdldENvbnRleHQiLCJjYW52YXNTaXplIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJibG9ja1NpemUiLCJwb3NpdGlvbiIsImJsb2NrU2hhcGUiLCJibG9ja0VudGl0eSIsInRyYW5zbGF0ZSIsIngiLCJ5IiwiZmlsbFN0eWxlIiwid2luZG93IiwiY3R4Iiwib25tb3VzZW1vdmUiLCJlIiwibW91c2VQb3MiLCJjbGllbnRYIiwib2Zmc2V0TGVmdCIsImNsaWVudFkiLCJvZmZzZXRUb3AiLCJjbGVhckZyYW1lIiwiZHJhd0N1cnNvciIsImxpbmUiLCJibG9ja1NoYWRvd0VudGl0eSIsInZlcnRpY2llcyIsImZyb250cGFuZVZlcnRlY2llcyIsImdldFZlcnRpY2llcyIsImJhY2twYW5lVmVydGVjaWVzIiwibWFwIiwiYWRkUGVyc3BlY3RpdmUiLCJmb3JFYWNoIiwidmVydGV4VmVjdG9yIiwiZmlsbFJlY3QiLCJzdHJva2VTdHlsZSIsImkiLCJ2ZXJ0ZWNpZXMiLCJuZXh0VmVydGV4IiwibGVuZ3RoIiwiZHJhd0xpbmUiLCJmcm9udHBhbmVWZXJ0ZXgiLCJjbGVhclJlY3QiLCJ2ZWN0b3IxIiwidmVjdG9yMiIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsIm1vdXNlUG9zVmVjIiwib2xkU3R5bGUiLCJwcm90b3R5cGUiLCJhZGQiLCJ2ZWN0b3IiLCJ2MSIsInYyIiwiZ2V0RGVsdGFYIiwiZ2V0RGVsdGFZIiwiZ2V0TGVuZ3RoIiwiTWF0aCIsInNxcnQiLCJwb3ciLCJ2ZWN0b3JzIiwic2hhcGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztBQ3RDQTs7QUFFQSxPQUFNQSx1QkFBdUIsS0FBN0I7O0FBRUEsT0FBTUMsU0FBUyxtQkFBQUMsQ0FBUSxDQUFSLENBQWY7QUFDQSxPQUFNQyxTQUFTRixPQUFPRSxNQUF0QjtBQUNBLE9BQU1DLE9BQU9ILE9BQU9HLElBQXBCO0FBQ0EsT0FBTUMsVUFBVUosT0FBT0ksT0FBdkI7QUFDQSxPQUFNQyxTQUFTTCxPQUFPSyxNQUF0Qjs7QUFFQSxPQUFNQyxTQUFTQyxTQUFTQyxjQUFULENBQXdCLFFBQXhCLENBQWY7QUFDQSxPQUFNQyxVQUFVSCxPQUFPSSxVQUFQLENBQWtCLElBQWxCLENBQWhCOztBQUVBLE9BQU1DLGFBQWEsSUFBSVQsTUFBSixDQUFXSSxPQUFPTSxXQUFsQixFQUErQk4sT0FBT08sWUFBdEMsQ0FBbkI7O0FBRUEsT0FBTUMsWUFBWSxJQUFJWixNQUFKLENBQVcsR0FBWCxFQUFnQixHQUFoQixDQUFsQjs7QUFHQSxPQUFNYSxXQUFXLElBQUliLE1BQUosQ0FBVyxDQUFYLEVBQWEsQ0FBYixDQUFqQjtBQUNBLE9BQU1jLGFBQWEsSUFBSVosT0FBSixDQUFZLENBQzdCLElBQUlGLE1BQUosQ0FBWSxFQUFaLEVBQWlCLEVBQWpCLENBRDZCLEVBRTdCLElBQUlBLE1BQUosQ0FBWSxFQUFaLEVBQWdCLENBQUMsRUFBakIsQ0FGNkIsRUFHN0IsSUFBSUEsTUFBSixDQUFXLENBQUMsRUFBWixFQUFnQixDQUFDLEVB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LFFBQXZCLEVBQWlDO0FBQy9CLFFBQUt5RCxLQUFMLEdBQWFBLEtBQWI7QUFDQSxRQUFLekQsUUFBTCxHQUFnQkEsUUFBaEI7QUFDRDtBQUNEVixRQUFPdUQsU0FBUCxDQUFpQnZCLFlBQWpCLEdBQWdDLFlBQVc7QUFDekMsU0FBTXRCLFdBQVcsS0FBS0EsUUFBdEI7QUFDQSxVQUFPLEtBQUt5RCxLQUFMLENBQVdyQyxTQUFYLENBQXFCSSxHQUFyQixDQUF5QixVQUFTRyxZQUFULEVBQXVCO0FBQ3JELFlBQU9BLGFBQWFtQixHQUFiLENBQWlCOUMsUUFBakIsQ0FBUDtBQUNELElBRk0sQ0FBUDtBQUdELEVBTEQ7QUFNQVYsUUFBT3VELFNBQVAsQ0FBaUIxQyxTQUFqQixHQUE2QixVQUFTNEMsTUFBVCxFQUFpQjtBQUM1QyxRQUFLL0MsUUFBTCxHQUFnQixLQUFLQSxRQUFMLENBQWM4QyxHQUFkLENBQWtCQyxNQUFsQixDQUFoQjtBQUNELEVBRkQ7O0FBSUFXLFFBQU9DLE9BQVAsR0FBaUI7QUFDZnhFLFdBQVFBLE1BRE87QUFFZkMsU0FBTUEsSUFGUztBQUdmQyxZQUFTQSxPQUhNO0FBSWZDLFdBQVFBO0FBSk8sRUFBakIsQyIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCA0ZWRlOWFhMzhjZDUxYjgwMzZkMVxuICoqLyIsIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBQRVJTUEVDVElWRV9DT05TVEFOVCA9IDAuODc1XG5cbmNvbnN0IHNoYXBlcyA9IHJlcXVpcmUoJy4vc2hhcGVzJylcbmNvbnN0IFZlY3RvciA9IHNoYXBlcy5WZWN0b3JcbmNvbnN0IExpbmUgPSBzaGFwZXMuTGluZVxuY29uc3QgUG9seWdvbiA9IHNoYXBlcy5Qb2x5Z29uXG5jb25zdCBFbnRpdHkgPSBzaGFwZXMuRW50aXR5XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKVxuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG5cbmNvbnN0IGNhbnZhc1NpemUgPSBuZXcgVmVjdG9yKGNhbnZhcy5jbGllbnRXaWR0aCwgY2FudmFzLmNsaWVudEhlaWdodClcblxuY29uc3QgYmxvY2tTaXplID0gbmV3IFZlY3RvcigxNTAsIDIwMClcblxuXG5jb25zdCBwb3NpdGlvbiA9IG5ldyBWZWN0b3IoMCwwKVxuY29uc3QgYmxvY2tTaGFwZSA9IG5ldyBQb2x5Z29uKFtcbiAgbmV3IFZlY3RvciggNjQsICA2NCksXG4gIG5ldyBWZWN0b3IoIDY0LCAtNjQpLFxuICBuZXcgVmVjdG9yKC02NCwgLTY0KSxcbiAgbmV3IFZlY3RvcigtNjQsICA2NClcbl0pXG5cbmNvbnN0IGJsb2NrRW50aXR5ID0gbmV3IEVudGl0eShibG9ja1NoYXBlLCBwb3NpdGlvbilcbmJsb2NrRW50aXR5LnBvc2l0aW9uID0gbmV3IFZlY3RvcigxMiwgMjMpXG5cblxuLy8gaW5pdFxuY29udGV4dC50cmFuc2xhdGUoY2FudmFzU2l6ZS54LzIsIGNhbnZhc1NpemUueS8yKVxuY29udGV4dC5maWxsU3R5bGUgPSBcInJnYmEoMjU1LDI1NSwyNTUsMC45KVwiXG53aW5kb3cuY3R4ID0gY29udGV4dFxuXG53aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlvbihlKSB7XG5cbiAgY29uc3QgbW91c2VQb3MgPSBuZXcgVmVjdG9yKFxuICAgIGUuY2xpZW50WCAtIGNhbnZhcy5vZmZzZXRMZWZ0LFxuICAgIGUuY2xpZW50WSAtIGNhbnZhcy5vZmZzZXRUb3BcbiAgKVxuXG4gIGNsZWFyRnJhbWUoKVxuICBkcmF3Q3Vyc29yKG1vdXNlUG9zKVxuXG4gIGJsb2NrRW50aXR5LnBvc2l0aW9uID0gbW91c2VQb3NcblxuICAvLyBjcmVhdGUgc2hhZG93IEVudGl0eVxuICBjb25zdCBsaW5lID0gbmV3IExpbmUoXG4gICAgYmxvY2tFbnRpdHkucG9zaXRpb24sXG4gICAgbmV3IFZlY3RvcigwLDApXG4gIClcblxuICBjb25zdCBibG9ja1NoYWRvd0VudGl0eSA9IG5ldyBFbnRpdHkoXG4gICAgYmxvY2tFbnRpdHkudmVydGljaWVzLFxuICAgIGJsb2NrRW50aXR5LnBvc2l0aW9uXG4gIClcblxuICBjb25zdCBmcm9udHBhbmVWZXJ0ZWNpZXMgPSBibG9ja0VudGl0eS5nZXRWZXJ0aWNpZXMoKVxuICBjb25zdCBiYWNrcGFuZVZlcnRlY2llcyA9IGZyb250cGFuZVZlcnRlY2llcy5tYXAoYWRkUGVyc3BlY3RpdmUpXG5cblxuICAvLyBkcmF3IGJhY2twYW5lIGRvdHMgKCM3NzcpXG4gIGNvbnRleHQuZmlsbFN0eWxlID0gJyM3NzcnXG4gIGJhY2twYW5lVmVydGVjaWVzLmZvckVhY2goZnVuY3Rpb24odmVydGV4VmVjdG9yKSB7XG4gICAgY29udGV4dC5maWxsUmVjdCh2ZXJ0ZXhWZWN0b3IueC0xLCB2ZXJ0ZXhWZWN0b3IueS0xLCAzLCAzKVxuICB9KVxuXG4gIC8vIGRyYXcgYmFja3BhbmUgbGluZXMgKCM3NzcpXG4gIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnIzc3NydcbiAgYmFja3BhbmVWZXJ0ZWNpZXMuZm9yRWFjaChmdW5jdGlvbih2ZXJ0ZXhWZWN0b3IsIGksIHZlcnRlY2llcykge1xuICAgIGNvbnN0IG5leHRWZXJ0ZXggPSB2ZXJ0ZWNpZXNbKGkgKyAxKSAlIHZlcnRlY2llcy5sZW5ndGhdXG4gICAgZHJhd0xpbmUodmVydGV4VmVjdG9yLCBuZXh0VmVydGV4KVxuICB9KVxuXG4gIC8vIGRyYXcgbWlkZGxlIGxpbmVzICgjYmJiKVxuICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNiYmInXG4gIGJhY2twYW5lVmVydGVjaWVzLmZvckVhY2goZnVuY3Rpb24odmVydGV4VmVjdG9yLCBpKSB7XG4gICAgY29uc3QgZnJvbnRwYW5lVmVydGV4ID0gZnJvbnRwYW5lVmVydGVjaWVzW2ldXG4gICAgZHJhd0xpbmUodmVydGV4VmVjdG9yLCBmcm9udHBhbmVWZXJ0ZXgpXG4gIH0pXG5cbiAgLy8gZHJhdyBmcm9udHBhbmUgbGluZXMgKCNmZmYpXG4gIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnI2ZmZidcbiAgZnJvbnRwYW5lVmVydGVjaWVzLmZvckVhY2goZnVuY3Rpb24odmVydGV4VmVjdG9yLCBpLCB2ZXJ0ZWNpZXMpIHtcbiAgICBjb25zdCBuZXh0VmVydGV4ID0gdmVydGVjaWVzWyhpICsgMSkgJSB2ZXJ0ZWNpZXMubGVuZ3RoXVxuICAgIGRyYXdMaW5lKHZlcnRleFZlY3RvciwgbmV4dFZlcnRleClcbiAgfSlcblxuICAvLyBkcmF3IGZyb250cGFuZSBkb3RzICgjZmZmKVxuICBjb250ZXh0LmZpbGxTdHlsZSA9ICcjZmZmJ1xuICBmcm9udHBhbmVWZXJ0ZWNpZXMuZm9yRWFjaChmdW5jdGlvbih2ZXJ0ZXhWZWN0b3IpIHtcbiAgICBjb250ZXh0LmZpbGxSZWN0KHZlcnRleFZlY3Rvci54LTEsIHZlcnRleFZlY3Rvci55LTEsIDMsIDMpXG4gIH0pXG5cblxufVxuXG5mdW5jdGlvbiBjbGVhckZyYW1lKCkge1xuICBjb250ZXh0LmNsZWFyUmVjdChcbiAgICAtY2FudmFzU2l6ZS54LzIsXG4gICAgLWNhbnZhc1NpemUueS8yLFxuICAgIGNhbnZhc1NpemUueCxcbiAgICBjYW52YXNTaXplLnlcbiAgKVxufVxuXG5mdW5jdGlvbiBkcmF3TGluZSh2ZWN0b3IxLCB2ZWN0b3IyKSB7XG4gIGNvbnRleHQuYmVnaW5QYXRoKClcbiAgY29udGV4dC5tb3ZlVG8odmVjdG9yMS54LCB2ZWN0b3IxLnkpXG4gIGNvbnRleHQubGluZVRvKHZlY3RvcjIueCwgdmVjdG9yMi55KVxuICBjb250ZXh0LnN0cm9rZSgpXG59XG5cbmZ1bmN0aW9uIGFkZFBlcnNwZWN0aXZlKHZlcnRleFZlY3Rvcikge1xuICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICB2ZXJ0ZXhWZWN0b3IueCAqIFBFUlNQRUNUSVZFX0NPTlNUQU5ULFxuICAgIHZlcnRleFZlY3Rvci55ICogUEVSU1BFQ1RJVkVfQ09OU1RBTlRcbiAgKVxufVxuXG5mdW5jdGlvbiBkcmF3Q3Vyc29yKG1vdXNlUG9zVmVjKSB7XG4gIGNvbnN0IG9sZFN0eWxlID0gY29udGV4dC5maWxsU3R5bGVcbiAgY29udGV4dC5maWxsU3R5bGUgPSAnI2ZmZidcbiAgY29udGV4dC5maWxsUmVjdChtb3VzZVBvc1ZlYy54LTUsIG1vdXNlUG9zVmVjLnktMSwgMTAsIDIpXG4gIGNvbnRleHQuZmlsbFJlY3QobW91c2VQb3NWZWMueC0xLCBtb3VzZVBvc1ZlYy55LTUsIDIsIDEwKVxuICBjb250ZXh0LmZpbGxTdHlsZSA9IG9sZFN0eWxlXG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9qcy9zcmMvYXBwLmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnXG5cbmZ1bmN0aW9uIFZlY3Rvcih4LHkpIHtcbiAgdGhpcy54ID0geFxuICB0aGlzLnkgPSB5XG59XG5WZWN0b3IucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHZlY3Rvcikge1xuICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICB0aGlzLnggKyB2ZWN0b3IueCxcbiAgICB0aGlzLnkgKyB2ZWN0b3IueVxuICApXG59XG5cbmZ1bmN0aW9uIExpbmUodjEsIHYyKSB7XG4gIHRoaXMudjEgPSB2MVxuICB0aGlzLnYyID0gdjJcbn1cbkxpbmUucHJvdG90eXBlLmdldERlbHRhWCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy52Mi54IC0gdGhpcy52MS54XG59XG5MaW5lLnByb3RvdHlwZS5nZXREZWx0YVkgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMudjIueSAtIHRoaXMudjEueVxufVxuTGluZS5wcm90b3R5cGUuZ2V0TGVuZ3RoID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoXG4gICAgTWF0aC5wb3codGhpcy5nZXREZWx0YVgoKSwgMikgK1xuICAgIE1hdGgucG93KHRoaXMuZ2V0RGVsdGFZKCksIDIpXG4gIClcbn1cblxuZnVuY3Rpb24gUG9seWdvbih2ZWN0b3JzKSB7XG4gIGlmICh2ZWN0b3JzLmxlbmd0aCA8IDMpIHRocm93ICdQb2x5Z29uIG11c3QgaGF2ZSBhdCBsZWFzdCAzIHZlcnRpY2llcydcbiAgdGhpcy52ZXJ0aWNpZXMgPSB2ZWN0b3JzXG59XG5cbmZ1bmN0aW9uIEVudGl0eShzaGFwZSwgcG9zaXRpb24pIHtcbiAgdGhpcy5zaGFwZSA9IHNoYXBlXG4gIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvblxufVxuRW50aXR5LnByb3RvdHlwZS5nZXRWZXJ0aWNpZXMgPSBmdW5jdGlvbigpIHtcbiAgY29uc3QgcG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uXG4gIHJldHVybiB0aGlzLnNoYXBlLnZlcnRpY2llcy5tYXAoZnVuY3Rpb24odmVydGV4VmVjdG9yKSB7XG4gICAgcmV0dXJuIHZlcnRleFZlY3Rvci5hZGQocG9zaXRpb24pXG4gIH0pXG59XG5FbnRpdHkucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHZlY3Rvcikge1xuICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbi5hZGQodmVjdG9yKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgVmVjdG9yOiBWZWN0b3IsXG4gIExpbmU6IExpbmUsXG4gIFBvbHlnb246IFBvbHlnb24sXG4gIEVudGl0eTogRW50aXR5XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9qcy9zcmMvc2hhcGVzLmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==